{# src/UserManagementBundle/Resources/views/form/new.html.twig #}

{% extends 'base.html.twig' %}

{% block body %}
{{ form_start(form, {'attr':{'novalidate' : 'novalidate','onsubmit':'return validation();'}}) }}
<table>
    <tr>
        <td>
            {{ form_label(form.username) }}
        </td>
        <td>
            <p class="widget">{{ form_widget(form.username) }}</p>
            <span class="error">{{ form_errors(form.username) }}</span>
        </td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.firstname) }}
        </td>
        <td>
            <p class="widget">{{ form_widget(form.firstname) }}</p>
            <span class="error">{{ form_errors(form.firstname) }}</span>
        </td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.lastname) }}
        </td>
        <td>
            <p class="widget">{{ form_widget(form.lastname) }}</p>
            <span class="error">{{ form_errors(form.lastname) }}</span>
        </td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.gender) }}
        </td>
        <td>
            <p class="widget">{{ form_widget(form.gender) }}</p>
            <span class="error">{{ form_errors(form.gender) }}</span>
        </td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.blood) }}
        </td>
        <td>
            <p class="widget">{{ form_widget(form.blood) }}</p>
            <span class="error">{{ form_errors(form.blood) }}</span>
        </td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.dob) }}
        </td>
        <td>
            <p class="widget">{{ form_widget(form.dob) }}</p>
            <span class="error">{{ form_errors(form.dob) }}</span>
        </td>
    </tr>
  
    <tr>
        <td>
            {{ form_label(form.emails) }}
        </td>
        <td>

        <ul id="email-fields-list"
            data-prototype="{{ form_widget(form.emails.vars.prototype)|e }}">
            {% for emailField in form.emails %}
                <p>
                    <p class="widget">{{ form_widget(emailField) }}<p>
                    <span class="error">{{ form_errors(emailField) }}</span>
                </p>
            {% endfor %}
        </ul>
        </td>
    </tr>
    <tr>
        <td>
        <a href="#" id="add-another-email" onclick="addField('email-fields-list')">Add another email</a>
        </td>
        <td></td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.mobileNumbers) }}
        </td>
        <td>

        <ul id="mobile-numbers-list"
            data-prototype="{{ form_widget(form.mobileNumbers.vars.prototype)|e }}">
            {% for mobileField in form.mobileNumbers %}
                <p>
                    <p class="widget">{{ form_widget(mobileField) }}</p>
                    <span class="error">{{ form_errors(mobileField) }}</span>

                </p>
            {% endfor %}
        </ul>
        </td>
    </tr>
    <tr>
        <td>
        <a href="#" id="add-another-number" onclick="addField('mobile-numbers-list')">Add another Number</a>
        </td>
        <td></td>
    </tr>
    <tr>
        <td>
            {{ form_label(form.education) }}
        </td>
        <td>

        <ul id="education-list"
            data-prototype="{{ form_widget(form.education.vars.prototype)|e }}">
            {% for edu in form.education %}
                <p>
                    <p class="widget">{{ form_widget(edu.eduType) }}</p>
                    <span class="error">{{ form_errors(edu.eduType) }}</span>
                    <p class="widget">{{ form_widget(edu.institute) }}</p>
                    <span class="error">{{ form_errors(edu.institute) }}</span>
                </p>
            {% endfor %}
        </ul>
        </td>
    </tr>
    <tr>
        <td>
        <a href="#" id="add-another-education" onclick="addField('education-list')">Add another Education</a>
        </td>
        <td></td>
    </tr>
    
    <tr>
        <td>
            {{ form_label(form.interests) }}
        </td>
        <td>

        <ul id="interests-list"
            data-prototype="{{ form_widget(form.interests.vars.prototype)|e }}">
            {% for interestfield in form.interests %}
                <p>
                    <p class="widget">{{ form_widget(interestfield.interest) }}</p>
                    <span class="error">{{ form_errors(interestfield.interest) }}</span>
                </p>
            {% endfor %}
        </ul>
        </td>
    </tr>
    <tr>
        <td>
        <a href="#" id="add-another-interest" onclick="addField('interests-list')">Add another interest</a>
        </td>
        <td></td>
    </tr>
    <tr>
        <td>
        </td>
        <td>
            {{ form_row(form.save) }}
        </td>
    </tr>
    </table>
            {{ form_row(form._token) }}

{{ form_end(form, {'render_rest': false}) }}
{% endblock %}


{% block javascripts %}
{#    {{ parent() }}#}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="{{ asset('bundles/usermanagement/js/addRemoveField.js') }}">    
    </script>
    <script src="{{ asset('bundles/usermanagement/js/validation.js') }}">
    </script>
    <script>
        $(document).ready(function() {
            var today = new Date();
            var currentYear = today.getFullYear();
            //var rangeLimit = currentYear-18;
            $( ".js-datepicker" ).datepicker({
                changeMonth: true,
                changeYear: true,
                yearRange: '1980:'+currentYear,
            });
        });
    </script>
    
{% endblock %}
{% block stylesheets %}
    <style>
        .ui-datepicker {
            background: #999;
        }
        div.email_id, div.phone_number, div.education_type, div.interest_area {
            display:inline-block;
        }
        
    </style>
{% endblock %}
        